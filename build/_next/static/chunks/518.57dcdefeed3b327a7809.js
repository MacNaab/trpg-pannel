(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[518],{474:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(5893),o=n(9227),i=n(7294);function s(e){var t=e.message,n=i.useState(!0),s=(0,o.Z)(n,2),l=s[0],a=s[1];return l?(0,r.jsx)("div",{className:"container items-center px-5 py-12 lg:px-20",children:(0,r.jsx)("div",{className:"w-full text-green-600 border rounded-lg shadow-xl ",children:(0,r.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 mx-auto ",children:[(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mr-4 icon icon-tabler icon-tabler-circle-check",width:"24",height:"24",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,r.jsx)("circle",{cx:"12",cy:"12",r:"9"}),(0,r.jsx)("path",{d:"M9 12l2 2l4 -4"})]}),(0,r.jsxs)("p",{className:"text-sm font-semibold tracking-wide uppercase ",children:[(0,r.jsx)("strong",{children:"Note:"})," ",t]})]}),(0,r.jsx)("button",{onClick:function(){a(!1)},className:"p-1 transition-colors duration-200 transform rounded-md hover:bg-opacity-25 hover:bg-blueGray-600 focus:outline-none",type:"button","aria-label":"Close","aria-hidden":"true",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-circle-x",width:"24",height:"24",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,r.jsx)("circle",{cx:"12",cy:"12",r:"9"}),(0,r.jsx)("path",{d:"M10 10l4 4m0 -4l-4 4"})]})})]})})}):null}function l(e){var t=e.message,n=i.useState(!0),s=(0,o.Z)(n,2),l=s[0],a=s[1];return l?(0,r.jsx)("div",{className:"container items-center px-5 py-12 lg:px-20",children:(0,r.jsx)("div",{className:"w-full text-red-600 border rounded-lg shadow-xl ",children:(0,r.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 mx-auto ",children:[(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mr-4 icon icon-tabler icon-tabler-alert-triangle",width:"24",height:"24",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,r.jsx)("circle",{cx:"12",cy:"12",r:"9"}),(0,r.jsx)("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"}),(0,r.jsx)("polyline",{points:"11 12 12 12 12 16 13 16"})]}),(0,r.jsxs)("p",{className:"text-sm font-semibold tracking-wide uppercase ",children:[(0,r.jsx)("strong",{children:"Erreur:"})," ",t]})]}),(0,r.jsx)("button",{onClick:function(){a(!1)},className:"p-1 transition-colors duration-200 transform rounded-md hover:bg-opacity-25 hover:bg-blueGray-600 focus:outline-none",type:"button","aria-label":"Close","aria-hidden":"true",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-circle-x",width:"24",height:"24",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,r.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,r.jsx)("circle",{cx:"12",cy:"12",r:"9"}),(0,r.jsx)("path",{d:"M10 10l4 4m0 -4l-4 4"})]})})]})})}):null}function a(e){var t=e.type,n=e.message;return"fail"===t?(0,r.jsx)(l,{message:n}):(0,r.jsx)(s,{message:n})}},7761:function(e,t,n){"use strict";var r=n(5893),o=n(7294),i=n(8379);t.Z=function(e){var t=e.input,n=e.setInput,s=(0,o.useState)(0),l=s[0],a=s[1],c=(0,o.useState)([]),u=c[0],d=c[1],m=(0,o.useState)(!1),h=m[0],x=m[1],p=(0,o.useState)({icon:!1,color:"black"}),f=p[0],g=p[1],j=function(t){a(0),d([]),x(!1),n(t.currentTarget.innerText);var r=e.suggestions.find((function(e){return e.name===t.currentTarget.innerText}));g(r)};return(0,r.jsxs)("div",{className:"mt-1 relative",children:[(0,r.jsxs)("button",{type:"button",className:"relative w-full bg-white border border-gray-300 rounded-md shadow-sm pl-3 pr-10 py-2 text-left cursor-default focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm","aria-haspopup":"listbox","aria-expanded":"true","aria-labelledby":"listbox-label",children:[(0,r.jsxs)("span",{className:"flex items-center",children:[f.icon?(0,r.jsx)(f.icon,{size:25}):(0,r.jsx)("span",{className:"flex-shrink-0 h-6 w-6 rounded-full",style:{backgroundColor:f.color}}),(0,r.jsx)("input",{type:"text",className:"ml-3 block truncate ml-3 block truncate relative w-full rounded-md pl-3 pr-10 py-2 text-left focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:e.placeholder,onChange:function(t){var r=e.suggestions,o=t.currentTarget.value,i=r.filter((function(e){return e.name.toLowerCase().indexOf(o.toLowerCase())>-1}));a(0),d(i),x(!0),n(t.currentTarget.value)},onKeyDown:function(e){if(13===e.keyCode)a(0),x(!1),n(u[l]);else{if(38===e.keyCode)return 0===l?null:a(l-1);if(40===e.keyCode)return l-1===u.length?null:a(l+1)}return null},value:t})]}),(0,r.jsx)("span",{className:"ml-3 absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),h&&t?u.length?(0,r.jsx)("ul",{className:"absolute z-10 mt-2 w-full bg-white shadow-lg max-h-56 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm",children:u.map((function(e){return(0,r.jsx)("li",{className:"text-gray-900 cursor-default select-none relative py-2 pl-3 pr-9",onClick:j,children:(0,r.jsxs)("div",{className:"flex items-center",children:[e.icon?(0,r.jsx)(e.icon,{size:25}):(0,r.jsx)("span",{className:"flex-shrink-0 h-6 w-6 rounded-full",style:{backgroundColor:e.color}}),(0,r.jsx)("span",{className:"font-normal ml-3 block truncate",children:e.name})]})},i())}))}):(0,r.jsx)("div",{className:"no-autocomplete",children:(0,r.jsx)("em",{children:"Aucun r\xc3\xa9sultat"})}):(0,r.jsx)(r.Fragment,{})]})}},9728:function(e,t,n){"use strict";var r=n(2585),o=Object.keys(r).map((function(e){return{name:e,icon:r[e]}}));t.Z=o},5073:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return oe}});var r=n(5893),o=n(9227),i=n(7294),s=n(9941),l=(n(4593),n(795)),a=n(4968),c=n(6584),u=n(6265),d=n(4860),m=n(155),h=n(8135),x=n(5003),p=n(6729),f=n(6618),g=n(5372),j=n(8104),v=n(9887),b=n(17),y=n(5243),k=n(2585),w=n(7762);var C=Object.keys(k).map((function(e){var t,n=k[e];return{id:e,marker:(t=(0,w.renderToStaticMarkup)((0,r.jsx)("div",{className:"border rounded-full",style:{width:60,height:60,backgroundColor:"white",marginTop:-25,marginLeft:-25},children:(0,r.jsx)("div",{className:"ml-1",children:(0,r.jsx)(n,{size:50})})})),(0,y.divIcon)({html:t}))}})),N=n(1608),S=["icon","img","titre","description"];var O=n(7761),Z=n(9728);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D=n(8379);function P(e){var t=e.isAdd,n=e.setAdd,s=e.NewPosition,l=e.setErr,a=e.setSucc,c=(0,d.q)(),y=c.isOpen,w=c.onOpen,M=c.onClose,P=i.useRef(),z=i.useState({icon:"",iconColor:"Black",img:"",titre:"",description:""}),E=(0,o.Z)(z,2),L=E[0],A=E[1],T=i.useState(""),F=(0,o.Z)(T,2),J=F[0],B=F[1],G=function(e){var t=e.target,n=t.name,r=t.value;A(I(I({},L),{},(0,u.Z)({},n,r)))},W=i.useState(""),R=(0,o.Z)(W,2),U=R[0],V=R[1];i.useEffect((function(){var e=C.find((function(e){return e.id===L.icon}));if(e){var t,n,r=null===(t=e.marker)||void 0===t||null===(n=t.options)||void 0===n?void 0:n.iconUrl;r&&r!==U&&V(r)}}),[L.icon]);var _=i.useState([]),H=(0,o.Z)(_,2),q=H[0],K=H[1];i.useEffect((function(){fetch(N.Jx+"user/data.json",{cache:"no-store"}).then((function(e){return e.json()})).then((function(e){K(e)}),(function(e){console.log(e),l("Une erreur est survenu, consultez la console pour plus d'informations")}))}),[]);var $=q[0]?q.map((function(e){return(0,r.jsx)("option",{value:e.nc,children:e.nc},D())})):null,Q=N.D4.map((function(e){return(0,r.jsxs)("option",{value:e,children:[" ",e," "]},D())}));function X(){var e=k;if(e[L.icon]){var t=e[L.icon];return(0,r.jsx)(t,{size:75,color:L.iconColor})}return null}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.z,{ref:P,colorScheme:"teal",onClick:w,children:"Menu"}),(0,r.jsxs)(h.dy,{isOpen:y,placement:"right",onClose:M,finalFocusRef:P,children:[(0,r.jsx)(x.ZA,{}),(0,r.jsxs)(h.sc,{children:[(0,r.jsx)(x.ol,{}),(0,r.jsx)(x.xB,{children:"Menu Admin"}),(0,r.jsxs)(x.fe,{children:[(0,r.jsxs)(p.NI,{display:"flex",alignItems:"center",children:[(0,r.jsx)(f.l,{htmlFor:"email-alerts",mb:"0",title:"Double clic pour ajouter un marker",children:"Mode Ajout Marker"}),(0,r.jsx)(g.r,{id:"email-alerts",size:"lg",isChecked:t,onChange:function(){n(!t)}})]}),(0,r.jsx)("small",{children:"Double clic sur la carte pour d\xe9finir la position."}),(0,r.jsx)("hr",{className:"mt-4"}),(0,r.jsxs)("div",{className:"grid justify-items-center gap-2 mt-10",children:[(0,r.jsxs)(j.Ph,{defaultValue:"Layer",onChange:function(e){B(e.target.value)},children:[(0,r.jsx)("option",{value:"Layer",children:"Layer"}),(0,r.jsx)("option",{value:"Commun",children:"Commun"}),$]}),(0,r.jsxs)("span",{children:["Position: ",null!==s?(0,r.jsxs)("span",{children:[" ",s[0].toFixed(2)," , ",s[1].toFixed(2)," "]}):null," "]}),(0,r.jsx)("img",{alt:"",className:"rounded-xl w-14 h-14",src:L.img}),(0,r.jsx)(v.I,{placeholder:"Image (url)",name:"img",onChange:G}),(0,r.jsx)(X,{}),(0,r.jsx)(O.Z,{input:L.icon,setInput:function(e){A(I(I({},L),{},{icon:e}))},suggestions:Z.Z,placeholder:"Icone"}),(0,r.jsxs)(j.Ph,{value:L.iconColor,name:"iconColor",onChange:G,children:[(0,r.jsx)("option",{value:"Couleur",disabled:!0,children:"Couleur"}),Q]}),(0,r.jsx)(v.I,{placeholder:"Titre",value:L.titre,name:"titre",onChange:G}),(0,r.jsx)(b.g,{placeholder:"Description ...",value:L.description,name:"description",onChange:G})]})]}),(0,r.jsxs)(x.mz,{children:[(0,r.jsx)(m.z,{variant:"outline",mr:3,onClick:M,children:"Annuler"}),(0,r.jsx)(m.z,{colorScheme:"blue",onClick:function(){!function(e,t,n,r,o,i){var s="";if(!e&&(s+="MapID "),!t&&(s+="Layer "),S.forEach((function(e){!n[e]&&(s+=e+" ")})),r?n.position=r:s+="position ",s)o("vous devez remplir tous les champs ("+s+")");else{var l={id:e,body:t,data:n};fetch(N.Jx+"map/add.php",{method:"POST",body:JSON.stringify(l)}).then((function(e){return e.json()})).then((function(e){console.log(e),i("Nouveau Marker ajout\xe9 dans la base de donn\xe9e.")}),(function(e){console.log(e),o("Une erreur c'est produite durant l'envoie des donn\xe9es, plus d'information dans la console.")}))}}(localStorage.getItem("MapID"),J,L,s,l,a)},children:"Valider"})]})]})]})]})}var z=n(6967),E={bottomleft:"leaflet-bottom leaflet-left",bottomright:"leaflet-bottom leaflet-right",topleft:"leaflet-top leaflet-left",topright:"leaflet-top leaflet-right"};function L(e){var t=e.position,n=e.setAdd,o=e.isAdd,i=e.NewPosition,s=e.setPosition,l=t&&E[t]||E.topright;return(0,r.jsx)("div",{className:l,children:(0,r.jsx)("div",{className:"leaflet-control leaflet-bar",children:(0,r.jsx)(z.x,{children:(0,r.jsx)(P,{setAdd:n,isAdd:o,NewPosition:i,setPosition:s,setErr:e.setErr,setSucc:e.setSucc})})})})}var A=n(1372),T=n(7409),F=n(8543),J=n(8193),B=n(1167),G=n.n(B),W=(n(3773),n(8581));function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V=n(8379),_=C.map((function(e){return(0,r.jsx)("option",{value:e.id,children:e.id},V())})),H=N.D4.map((function(e){return(0,r.jsx)("option",{value:e,children:e},V())}));function q(e){var t=e.setErr,n=e.setSucc,s=e.markerData,l=i.useState(!1),a=(0,o.Z)(l,2),c=a[0],d=a[1],m=i.useState({position:s.position,icon:s.icon,iconColor:s.iconColor?s.iconColor:"black",img:s.img,titre:s.titre,description:s.description}),h=(0,o.Z)(m,2),x=h[0],p=h[1],f=i.useState({position:s.position,icon:s.icon,iconColor:s.iconColor?s.iconColor:"black",img:s.img,titre:s.titre,description:s.description}),g=(0,o.Z)(f,2),j=g[0],v=g[1],b=function(e){if(e.target){var t=e.target,n=t.value,r=t.name;p(U(U({},x),{},(0,u.Z)({},r,n)))}};return(0,r.jsx)("div",{className:"w-full mx-auto",children:(0,r.jsxs)("div",{className:"rounded-xl bg-blueGray-50",children:["admin"===e.userID?(0,r.jsx)("button",{type:"button",onClick:function(){d(!c)},className:"float-right rounded-full hover:bg-gray-100 hover:border-gray-500 hover:p-1 ",children:(0,r.jsx)(J.$iz,{className:"m-auto"})}):null,c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("img",{className:"object-cover object-center w-full lg:h-48 md:h-36 rounded-xl",src:x.img,alt:"erreur"}),(0,r.jsx)("input",{onChange:b,value:x.img,name:"img",className:"w-full mb-4 px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg  focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Image (URL)"})]}):(0,r.jsx)(W.Z,{className:"object-cover object-center w-full mb-4 lg:h-48 md:h-36 rounded-xl",src:j.img}),(0,r.jsx)("h1",{className:"mx-auto mb-8 text-2xl font-semibold leading-none tracking-tighter text-black title-font",children:c?(0,r.jsx)("input",{onChange:b,value:x.titre,name:"titre",className:"w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-lg  focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Titre"}):j.titre}),(0,r.jsx)("div",{className:"mx-auto text-justify text-base font-medium leading-relaxed text-blueGray-700 ",children:c?(0,r.jsx)(G(),{theme:"snow",onChange:function(e){p(U(U({},x),{},{description:e}))},value:x.description,placeholder:"Description"}):(0,r.jsx)("p",{dangerouslySetInnerHTML:{__html:j.description}})}),c?(0,r.jsxs)("div",{className:"m-2",children:[(0,r.jsxs)("select",{defaultValue:x.icon,name:"icon",onChange:b,className:"p-1 flex m-auto",children:[(0,r.jsx)("option",{disabled:!0,children:"Type de Marker"}),_]}),(0,r.jsxs)("select",{defaultValue:x.iconColor,name:"iconColor",onChange:b,className:"p-1 flex m-auto",children:[(0,r.jsx)("option",{disabled:!0,children:"Couleur du Marker"}),H]})]}):null,(0,r.jsx)("p",{className:"mx-auto text-justify text-base font-medium leading-relaxed text-blueGray-700 ",children:c?(0,r.jsx)("button",{type:"button",className:"w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",onClick:function(){v(x),function(e,t,n,r,o){var i={id:e,body:t,data:n};fetch(N.Jx+"map/edit.php",{method:"POST",body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(e){console.log(e),o("Edition du Marker r\xe9ussite.")}),(function(e){console.log(e),r("Une erreur c'est produite durant l'envoie des donn\xe9es, plus d'information dans la console.")}))}(localStorage.getItem("MapID"),e.bodyCard?e.bodyCard:"Commun",x,t,n),d(!1)},children:"Valider"}):null})]})})}var K=Object.keys(k),$=function(e){var t,n=e.color,o=void 0===n?"black":n,i=e.e,s=void 0===i?"GiPositionMarker":i,l=k,a=K.includes(s)?l[s]:l.GiPositionMarker;return{id:s,marker:(t=(0,w.renderToStaticMarkup)((0,r.jsx)("div",{className:"border rounded-full",style:{width:60,height:60,backgroundColor:"white",marginTop:-25,marginLeft:-25},children:(0,r.jsx)("div",{className:"ml-1 mt-1",children:(0,r.jsx)(a,{size:50,color:o})})})),(0,y.divIcon)({html:t}))}};function Q(e){var t=e.markerData,n=$({color:t.iconColor,e:t.icon});return(0,r.jsx)(T.J,{position:t.position,icon:n.marker,children:(0,r.jsx)(F.G,{minWidth:250,maxWidth:1e3,children:(0,r.jsx)(q,{setErr:e.setErr,setSucc:e.setSucc,userID:e.userID,bodyCard:e.bodyCard,markerData:t})})})}var X=n(8379);function Y(e){var t=e.userID,n=e.mapData,o=e.setErr,i=e.setSucc,s=Object.keys(n.Player),l=n.Commun.map((function(t){return(0,r.jsx)(Q,{setErr:o,setSucc:i,userID:e.userID,bodyCard:"Commun",markerData:t},X())}));if("admin"===t){var c=s.map((function(e){return(0,r.jsx)(a.et.Overlay,{name:e,checked:!0,children:(0,r.jsx)(A.e,{children:n.Player[e].map((function(n){return(0,r.jsx)(Q,{bodyCard:e,userID:t,position:n.position,icon:n.icon,img:n.img,titre:n.titre,description:n.description},X())}))})},X())}));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.et.Overlay,{name:"Layer Commun",checked:!0,children:(0,r.jsx)(A.e,{children:l})}),c]})}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.et.Overlay,{name:"Layer Commun",checked:!0,children:(0,r.jsx)(A.e,{children:l})}),(0,r.jsx)(a.et.Overlay,{name:t,checked:!0,children:(0,r.jsx)(A.e,{children:s.includes(t)?n.Player[t].map((function(e){return(0,r.jsx)(Q,{bodyCard:t,position:e.position,icon:e.icon,img:e.img,titre:e.titre,description:e.description},X())})):null})})]})}var ee=n(474);function te(e){var t=e.err,n=e.setErr,o=e.succ,i=e.setSucc,s=e.MapID,u=e.setAdd,d=e.isAdd,m=e.ElPosition,h=e.setPosition,x=e.LocationMarker,p=e.mapData,f=e.userID;function g(){return t?(0,r.jsx)(ee.Z,{type:"fail",message:t}):o?(0,r.jsx)(ee.Z,{message:t}):null}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g,{}),(0,r.jsxs)(l.h,{center:[0,0],zoom:s.zoom,minZoom:s.minZoom,maxZoom:s.maxZoom,scrollWheelZoom:!1,style:{height:"80vh",width:"100%"},children:[(0,r.jsxs)(a.et,{position:"bottomleft",children:[(0,r.jsx)(a.et.BaseLayer,{checked:!0,name:"OpenStreetMap.Mapnik",children:(0,r.jsx)(c.I,{url:"https://macnaab.github.io/Random-Tables/WM/"+s.id+"/map/{z}/{x}/{y}.png"})}),(0,r.jsx)(Y,{setErr:n,setSucc:i,userID:f,mapData:p})]}),(0,r.jsx)(L,{position:"topright",setAdd:u,isAdd:d,NewPosition:m,setPosition:h,setErr:n,setSucc:i}),(0,r.jsx)(x,{})]})]})}var ne=n(3780);function re(e){var t=e.position,n=$({color:void 0,e:void 0});return(0,r.jsx)(T.J,{position:t,icon:n.marker})}var oe=function(){var e=i.useState(!1),t=(0,o.Z)(e,2),n=t[0],l=t[1],a=i.useState(null),c=(0,o.Z)(a,2),u=c[0],d=c[1],m=i.useState({id:null,zoom:3,minZoom:2,maxZoom:5}),h=(0,o.Z)(m,2),x=h[0],p=h[1],f=i.useState(!1),g=(0,o.Z)(f,2),j=g[0],v=g[1],b=i.useState(null),y=(0,o.Z)(b,2),k=y[0],w=y[1],C=i.useState(null),S=(0,o.Z)(C,2),O=S[0],Z=S[1],M=i.useState(!1),I=(0,o.Z)(M,2),D=I[0],P=I[1],z=i.useState(!1),E=(0,o.Z)(z,2),L=E[0],A=E[1];return i.useEffect((function(){var e=localStorage.getItem("MapID");e?(p({id:e,zoom:Number(localStorage.getItem("MapZoom")),minZoom:Number(localStorage.getItem("MapMinZ")),maxZoom:Number(localStorage.getItem("MapMaxZ"))}),console.log("Param\xe8tres de la carte:",{id:e,zoom:Number(localStorage.getItem("MapZoom")),minZoom:Number(localStorage.getItem("MapMinZ")),maxZoom:Number(localStorage.getItem("MapMaxZ"))}),document.title="Carte interactive - "+localStorage.getItem("MapTitre"),fetch(N.Jx+"map/"+e+".json",{cache:"no-store"}).then((function(e){return e.json()})).then((function(e){w(e),v(!0)}),(function(e){console.log(e),P("Une erreur est survenue lors du chargement des donn\xe9es, consulter la console pour plus d'informations.")}))):P("Erreur: MapID est null");var t=localStorage.getItem("PJ");t&&Z(t)}),[]),(0,r.jsx)(r.Fragment,{children:j?(0,r.jsx)(te,{err:D,setErr:P,succ:L,setSucc:A,MapID:x,setAdd:l,isAdd:n,ElPosition:u,setPosition:d,LocationMarker:function(){return n&&(0,s.zV)({dblclick:function(e){d([e.latlng.lat,e.latlng.lng])}}),null===u?null:(0,r.jsx)(re,{position:u})},userID:O,mapData:k}):(0,r.jsxs)("div",{className:"my-10",children:[(0,r.jsx)("div",{className:"m-auto w-0",children:(0,r.jsx)(ne.Fold,{size:50,color:"purple"})}),(0,r.jsx)("div",{className:"text-center",children:"Chargement ..."})]})})}}}]);